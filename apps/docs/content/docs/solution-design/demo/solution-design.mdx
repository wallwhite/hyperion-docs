---
title: Solution Design 
description: description
---

# ЗА 14 днів до кінця ліценції відправляти емейл що скоро оплата


## Purpose 
Ми як бізнес хочемо за 14 днів до кінця підписки - відправити емейл користувачу, що ми скоро з нього знімемо гроші, і якщо він був в нашому тесті пониження ціни то ми йому підвисили ціну на користування на інший план

## Owners 
- **Manager**: PO Роман
- **Team**: Курс Стрім Елайнет Тім


## Flow Overview


 ###  Flow Cron Job 
    <Diagram lang="plantuml" path="sdk-flow.puml" alt="Flow Cron Job" /> 

 ### Processing Flow 
    <Diagram lang="plantuml" path="processing-flow.puml" alt="Flow Cron Job" />     


## Scope

### In Scope
- [ ] Відсилати емел
- [ ] Покриваємо ретрай стратегією проблеми комунікації 
- [ ] Апгдей по Hike API


### Out of Scope
- [ ] Log Email Send
- [ ] Validate Email
- [ ] Редизайн емелй листа 


## Risk

### Technical Risks
| Risk | Impact | Mitigation |
|------|--------|------------|
| Mail Provider not send 100% emails     |    Medium    |         |
| Limit      |    Low    |    в нас там ж ретрай ліміти 1 міліон - в нас там серення кількітсь 300 тисяч - тому ми не попадемо в ліміти тільки то коли буде ще велика маркетологічна розсилка - і ми встанемо просто в чергу і коли буде можлість відправимо     |
| Limit      |    Medium    |         |


### Stability Concerns

- [ ] крон не запустявся
- [ ] дешевий ранер який відізвали і він просто помер
- [ ] прилягнув який із сервісів
- [ ] поклали базу пулінгом


## Research

### Ресьорч номер 1 
 Це неможливо зробити на Payment Provider бо він дає в конфігурації тільки до 7 днів
 Пеймент провайдер не дає змогу настільки гибко кастомізувати емейл навскільки показано в дизайні 

Result: Писати сапопис) 


## Additional Requirements

### Backend
- [ ] Моніторінг система запусків крону
- [ ] Алерт система que 
- [ ] keda auto scale - статеріяц
- [ ] ses - використовувати тільки прогріті домени


#### api/v1/
```json 
{
    id: uuid
}
```

### Frontend
- [ ] посилання на продуктові картинки будуть надходити з бекенду
- [ ] на базі activation Days - міняти текста

### QA
- [ ] Нам треба тестувати емел
- [ ] Потрібно тестувати локалізацію емейла


## Additional Documentation
 - Jira
 - design 
 - adr
 - process 
 - agremment 